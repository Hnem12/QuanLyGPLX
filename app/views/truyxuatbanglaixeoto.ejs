<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Truy xuất bằng lái xe</title>
</head>
<body>
    
    <h1>Truy xuất thông tin bằng lái xe</h1>
    <input type="text" id="idOrGPLX" placeholder="Nhập ID hoặc Mã GPLX" />
    <button onclick="fetchLicenseHolder()">Tìm kiếm</button>
    
    <div id="details"></div>

    <script>
        async function fetchLicenseHolder() {
            const idOrGPLX = document.getElementById('idOrGPLX').value;
            try { 
                const response = await fetch(`/api/licenseHolder/${idOrGPLX}`);
                if (!response.ok) {
                    throw new Error('Không tìm thấy chủ sở hữu GPLX');
                }
                const holder = await response.json();
                displayLicenseHolder(holder);
            } catch (error) {
                console.error('Error fetching license holder:', error);
                alert(error.message);
            }
        }

        function displayLicenseHolder(holder) {
            const detailDiv = document.getElementById('details');
            detailDiv.innerHTML = `
                <h3>Chi tiết chủ sở hữu GPLX</h3>
                <p>Tên: ${holder.Name}</p>
                <p>Ngày sinh: ${new Date(holder.DateOfBirth).toLocaleDateString()}</p>
                <p>CCCD: ${holder.CCCD}</p>
                <p>Địa chỉ: ${holder.Address}</p>
                <p>Số điện thoại: ${holder.PhoneNumber}</p>
                <p>Email: ${holder.Email}</p>
                <p>Ngày cấp: ${new Date(holder.Ngaycap).toLocaleDateString()}</p>
                <p>Ngày hết hạn: ${new Date(holder.Ngayhethan).toLocaleDateString()}</p>
                <p>Trạng thái: ${holder.Status}</p>
                <p>Giám đốc: ${holder.Giamdoc}</p>
                <p>Lỗi vi phạm: ${holder.Loivipham}</p>
                <p>Mã GPLX: ${holder.MaGPLX}</p>
            `;
        }
    </script>
</body>

</html>
