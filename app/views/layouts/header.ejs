<link rel="stylesheet" href="css/Home/Header.css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<div class="header">
    <div class="logo">
        <img src="/uploads/H7.png" alt="Logo">
        <div class="title">
            <a href="/trangchu" style="color: white; text-decoration: none;">Trang Ch·ªß</a>
        </div>
    </div>
    <div class="user-info">
        <div class="notification">üîî</div>
        <div class="username" id="usernameDisplay">  </div>
        <div class="avatar-container">
            <img id="avatarImage" src="./uploads/h6.jpg" alt="Avatar" style="cursor: pointer;">
            <div class="dropdown-menu">
                <ul>
                    <li id="personalInfoButton">Th√¥ng tin c√° nh√¢n</li>
                    <li id="openPasswordModal" >ƒê·ªïi M·∫≠t Kh·∫©u</li>
                    <li id="openKeyModal"> T·∫°o kh√≥a</li>
                    <li id="logoutButton"> ƒêƒÉng xu·∫•t</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div id="keyModal" class="modal2">
    <div class="modal-content">
        <div style="display: flex;">
            <h2>C·∫•p kh√≥a cho ng∆∞·ªùi d√πng</h2>
            <span style="margin-left: 150px;" class="close" onclick="closeKeyModal()">&times;</span>
        </div>
            <p id="KeyLabel" style="display: none;">B·∫°n c√≥ mu·ªën c·∫•p kh√≥a cho ng∆∞·ªùi d√πng n√†y kh√¥ng???</p> 
        <input type="text" id="KeyCA" style="margin-top: -5px; font-weight: bold; width: 100%; padding: 10px; border: 2px solid #4CAF50; border-radius: 5px;" readonly hidden />
        <!-- Message to indicate if the public key exists -->
        <p id="publicKeyStatus" style="color: red; display: none; margin-top: 5px;">Ch∆∞a c√≥ kh√≥a c√¥ng khai.</p>
             
        <div class="Xepngang">
            <button id="generateKeyBtn" onclick="generateUserKey()">X√°c nh·∫≠n c·∫•p kh√≥a</button>
            <button style="margin-left:10px;" onclick="closeKeyModal()">H·ªßy</button>
        </div>

        <p id="privateKeyLabel" style="display: none; margin-top: -5px;">Kh√≥a b√≠ m·∫≠t</p> <!-- Label for private key, initially hidden -->
        <!-- Textbox ƒë·ªÉ hi·ªÉn th·ªã kh√≥a ri√™ng -->
        <input type="text" id="privateKeyField" style="margin-top: -5px; font-weight: bold; width: 100%; padding: 10px; border: 2px solid #4CAF50; border-radius: 5px;" readonly hidden /> <!-- Field to display the private key -->

            <!-- N√∫t t·∫£i kh√≥a v·ªÅ v√† sao ch√©p -->
            <div class="Xepngang" style="margin-top: 10px; display: none;" id="keyActions">
                <button onclick="downloadKey()">T·∫£i v·ªÅ (.txt)</button>
                <button style="margin-left: 10px;" onclick="copyToClipboard()">Sao ch√©p</button>
        </div>
    </div>
</div>

<div id="personalInfoModal" class="modal1">
    <div class="modal-content1">
        <h2 style="text-align: center;">Th√¥ng Tin C√° Nh√¢n</h2>

        <!-- Form ch√≠nh v·ªõi hai ph·∫ßn -->
        <form id="updateForm" class="modal-form1">
            <div class="form-sections-container">
                <!-- Ph·∫ßn form b√™n tr√°i -->
                <div class="form-section1">
                    <label for="usernameInput">T√™n ƒêƒÉng Nh·∫≠p:</label>
                    <input type="text" id="usernameInput" name="username" disabled>

                    <label for="emailInput">Email:</label>
                    <input type="text" id="emailInput" name="email" required>

                    <label for="phoneInput">S·ªë ƒêi·ªán Tho·∫°i:</label>
                    <input type="text" id="phoneInput" name="phone" required>
                </div>

                <!-- Ph·∫ßn form b√™n ph·∫£i -->
                <div class="form-section2">
                    <label for="roleInput">Vai tr√≤:</label>
                    <input type="text" id="roleInput" name="role" disabled>

                    <label for="nameInput">H·ªç v√† T√™n:</label>
                    <input type="text" id="nameInput" name="name" required>

                    <label for="genderInput">Gi·ªõi T√≠nh:</label>
                    <select id="genderInput" name="gender" required>
                        <option value="Male">Nam</option>
                        <option value="Female">N·ªØ</option>
                    </select>                    
                </div>
            </div>

            <!-- ƒê·ªãa ch·ªâ -->
            <div class="updateanh">
                <label for="addressInput">ƒê·ªãa Ch·ªâ:</label>
                <input type="text" id="addressInput" name="address" required>
            </div>

            <!-- Ph·∫ßn ch·ªçn ·∫£nh ƒë·∫°i di·ªán -->
            <div class="image-upload-container" >
                <span>Ch·ªçn ·∫£nh ƒë·∫°i di·ªán</span>
                <label for="imageInput" style="cursor: pointer; position: relative;">
                    <img id="imagePreview" src="./uploads/h6.jpg" alt="Avatar" >
                    <img class="icon-overlay" src="https://img.icons8.com/ios/50/camera--v3.png" alt="Camera Icon">
                </label>
                <input type="file" id="imageInput" accept="image/*" style="display: none;">
            </div>
            
            

            <!-- N√∫t b·∫•m -->
            <div class="upload-section">
                <button class="button1" type="submit">C·∫≠p Nh·∫≠t Th√¥ng Tin</button>
                <button class="button1" type="button" id="closeModalButton">Tho√°t</button>
            </div>
        </form>
    </div>
</div>

<div id="passwordChangeModal" class="custom-modal">
    <div class="custom-modal-content">
        <h2 style="text-align: center;">ƒê·ªïi M·∫≠t Kh·∫©u</h2>

        <form id="passwordForm" class="custom-form">
            <div class="custom-form-sections">
                <div class="custom-form-section">
                    <label for="currentPassword">M·∫≠t kh·∫©u c≈©:</label>
                    <input type="password" id="currentPassword" name="currentPassword" required>

                    <label for="newPassword">M·∫≠t kh·∫©u m·ªõi:</label>
                    <input type="password" id="newPassword" name="newPassword" required>

                    <label for="confirmNewPassword">Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi:</label>
                    <input type="password" id="confirmNewPassword" name="confirmNewPassword" required>

                    <!-- T√πy ch·ªçn xem m·∫≠t kh·∫©u -->
                    <div class="show-password">
                        <input type="checkbox" id="togglePasswordVisibility">
                        <label for="togglePasswordVisibility">Hi·ªÉn th·ªã m·∫≠t kh·∫©u</label>
                    </div>
                </div>
            </div>

            <!-- N√∫t b·∫•m -->
            <div class="custom-button-group">
                <button class="custom-button" type="submit">C·∫≠p Nh·∫≠t</button>
                <button class="custom-button" type="button" id="closePasswordModal">Tho√°t</button>
            </div>
        </form>
    </div>
</div>




<script src="js/Home/Header.js"> </script>

    