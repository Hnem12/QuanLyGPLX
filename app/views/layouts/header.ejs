<link rel="stylesheet" href="css/header.css">
<div class="header">
    <div class="logo">
        <img src="/uploads/h7.png" alt="Logo">
        <div class="title">
            <a href="http://localhost:3001/trangchu" style="color: white; text-decoration: none;">Trang Ch·ªß</a>
        </div>
    </div>
    <div class="user-info">
        <div class="notification">üîî</div>
        <div class="username" id="usernameDisplay">  </div>
        <div class="avatar-container">
            <img id="avatarImage" src="./uploads/h6.jpg" alt="Avatar" style="cursor: pointer;">
            <div class="dropdown-menu">
                <ul>
                    <li id="personalInfoButton">Th√¥ng tin c√° nh√¢n</li> <!-- Added ID for personal info -->
                    <li id="logoutButton">ƒêƒÉng xu·∫•t</li>
                </ul>
            </div>
        </div>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const username = localStorage.getItem('username');
        const userImage = localStorage.getItem('image'); // Get the image path from localStorage
        const usernameDisplay = document.getElementById('usernameDisplay');
        const avatarImage = document.getElementById('avatarImage');
        const dropdownMenu = document.querySelector('.dropdown-menu');
        const avatarContainer = document.querySelector('.avatar-container');
        const logoutButton = document.getElementById('logoutButton');
        const personalInfoButton = document.getElementById('personalInfoButton'); // Get the personal info button
    
        // Set username and avatar image
        if (username) {
            usernameDisplay.textContent = `Ch√†o m·ª´ng ${username} ƒë·∫øn v·ªõi h·ªá th·ªëng qu·∫£n l√Ω GPLX`;
            avatarImage.src = userImage || './uploads/h6.jpg'; // Fallback to default image
        } else {
            usernameDisplay.textContent = 'Kh√°ch';
            avatarImage.src = './uploads/h6.jpg'; // Default image if none
        }
    
        // Toggle dropdown on avatar click
        avatarContainer.addEventListener('click', function(event) {
            event.stopPropagation(); // Prevent the event from bubbling up
            dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block'; // Toggle visibility
        });
    
        // Hide dropdown when clicking outside
        document.addEventListener('click', function(event) {
            if (!avatarContainer.contains(event.target)) {
                dropdownMenu.style.display = 'none'; // Hide dropdown
            }
        });
    
        // Handle logout button click
        logoutButton.addEventListener('click', (event) => {
            event.preventDefault(); // Prevent default behavior of the logout link
            const confirmLogout = confirm('B·∫°n c√≥ ch·∫Øc l√† mu·ªën tho√°t kh√¥ng?'); // Ask for confirmation
    
            if (confirmLogout) {
                localStorage.removeItem('username'); // Clear username from localStorage
                localStorage.removeItem('image');    // Clear image from localStorage if set
                localStorage.removeItem('token');    // Clear token from localStorage
    
                alert('B·∫°n ƒë√£ ƒëƒÉng xu·∫•t th√†nh c√¥ng!'); // Notify user of successful logout
                window.location.href = "/login";      // Redirect to login page
            }
        });
    
        // Handle personal info button click
        personalInfoButton.addEventListener('click', (event) => {
            event.preventDefault(); // Prevent any default action
            alert('Hi·ªÉn th·ªã th√¥ng tin c√° nh√¢n...'); // Replace this with actual functionality
            // Implement the logic for showing personal info here
            // You might want to navigate to another page or open a modal
        });
    });
    </script>
    