<link rel="stylesheet" href="css/trangchu.css">
<div class="header">
    <div class="logo">
        <img src="/uploads/h7.png" alt="Logo">
        <div class="title">
            <a href="http://localhost:3001/trangchu" style="color: white; font-family: Georgia, 'Times New Roman', Times, serif; text-decoration: none;">Trang Ch·ªß</a>
        </div>
        <button id="toggleButton" class="btn btn-outline-light">
            <i class="fas fa-chevron-left"></i>
        </button>
    </div>
    <div class="user-info">
        <div class="notification">üîî</div>
        <div class="username" id="usernameDisplay"></div>
                <div class="avatar-container" style="display: flex; justify-content: center; align-items: center; height: 40px; width: 40px; overflow: hidden; border-radius: 50%; border: 2px solid #ccc;">
            <img id="avatarImage" src="./uploads/h6.jpg" alt="Avatar" style="border-radius: 50%; height: 100%; width: 100%; object-fit: cover;">
        </div>
        <a href="#" class="logout-button" id="logoutButton">ƒêƒÉng xu·∫•t</a>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const username = localStorage.getItem('username');
    const userImage = localStorage.getItem('image'); // L·∫•y ƒë∆∞·ªùng d·∫´n h√¨nh ·∫£nh
    const usernameDisplay = document.getElementById('usernameDisplay');
    const avatarImage = document.getElementById('avatarImage'); // Ph·∫ßn t·ª≠ ƒë·ªÉ hi·ªÉn th·ªã h√¨nh ·∫£nh

    console.log('Retrieved Username:', username);
    console.log('Retrieved User Image URL:', userImage);
    console.log('Avatar Image Element:', avatarImage); // Log the avatar image element

    if (username) {
        usernameDisplay.textContent = username; 
        if (avatarImage) { // Check if avatarImage exists
            avatarImage.src = userImage || './uploads/h6.jpg'; // C·∫≠p nh·∫≠t ƒë∆∞·ªùng d·∫´n h√¨nh ·∫£nh ho·∫∑c s·ª≠ d·ª•ng h√¨nh ·∫£nh m·∫∑c ƒë·ªãnh
        } else {
            console.error('Avatar image element not found!'); // Log an error if the element is not found
        }
    } else {
        usernameDisplay.textContent = 'Kh√°ch';
        if (avatarImage) { // Check if avatarImage exists
            avatarImage.src = './uploads/h6.jpg'; // H√¨nh ·∫£nh m·∫∑c ƒë·ªãnh n·∫øu kh√¥ng c√≥
        }
    }
});


document.getElementById('logoutButton').addEventListener('click', (event) => {
    event.preventDefault(); // Prevent the default link behavior

    const confirmLogout = confirm('B·∫°n c√≥ ch·∫Øc l√† mu·ªën tho√°t kh√¥ng?'); // Ask for confirmation

    if (confirmLogout) {
        localStorage.removeItem('username'); // Clear username from local storage
        localStorage.removeItem('token'); // Clear token from local storage
        alert('B·∫°n ƒë√£ ƒëƒÉng xu·∫•t th√†nh c√¥ng!'); // Notify the user

        // Redirect to login page
        window.location.href = "/login"; // Change to your logout redirection

        // Clear previous history to prevent back navigation
        setTimeout(() => {
            window.history.pushState(null, null, window.location.href);
            window.onpopstate = function () {
                window.history.pushState(null, null, window.location.href);
            };
        }, 0);
    }
});


</script>
